var C=(t,s,n)=>new Promise((u,a)=>{var m=o=>{try{d(n.next(o))}catch(r){a(r)}},i=o=>{try{d(n.throw(o))}catch(r){a(r)}},d=o=>o.done?u(o.value):Promise.resolve(o.value).then(m,i);d((n=n.apply(t,s)).next())});import{v as e,_ as k,u as _,L as y,p as f,q as B,l as g,s as h,t as L}from"./main.50abc935.js";import{S as $,a as N}from"./swiper-slide.4a158d37.js";import{a as v}from"./alert-circle.4df9b043.js";import{u as A}from"./useSSR.5ef275e1.js";import{U as I}from"./index.5d654b86.js";const D=e.defineComponent({name:"Alert",props:{label:{type:String,required:!0}},data(){return{alert:v}}});const F={class:"tableAlert flexRowCenter"},T=["src"];function V(t,s,n,u,a,m){return e.openBlock(),e.createElementBlock("div",F,[e.createElementVNode("img",{alt:"alert",src:t.alert},null,8,T),e.createElementVNode("p",null,e.toDisplayString(t.label),1)])}const w=k(D,[["render",V],["__scopeId","data-v-7535532e"]]);class b{constructor(){this.increaseBad="stock__increase--bad",this.increaseGood="stock__increase--good",this.increaseEmpty="stock__increase--no-data",this.emptyText="0.00"}checkIncreaseClass(s){return s?Number(s)>=0?this.increaseGood:this.increaseBad:this.increaseEmpty}checkExist(s){return s||this.emptyText}toFixed(s,n=2){const u=this.checkExist(s);return u!==this.emptyText?Number(u).toFixed(n):u}isExistItem(s){return s&&Object.keys(s).length!==0?s:null}convertDate(s){return s?s.toString().split("-").reverse().join("."):""}}const E=new b,U=e.defineComponent({name:"LinkStock",props:{item:{type:Object,default:()=>{}}},setup(t){const s=_();return{route:s,getLink:()=>`/${String(s.params.locale).toLowerCase()}/stock/${String(s.params.region).toUpperCase()}/${t.item.NAME}/${t.item.SECID}/info`,meUtils:E}}});const M={class:"linkList"},R={key:1,class:"linkList__wrap"},O=e.createTextVNode(" ("),G={class:"linkList__itemLastPrice"},P=e.createTextVNode(") ");function H(t,s,n,u,a,m){const i=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",M,[t.meUtils.isExistItem(t.item)?(e.openBlock(),e.createBlock(i,{key:0,to:t.getLink(),class:"linkList__link"},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(t.item.NAME),1)]),_:1},8,["to"])):e.createCommentVNode("",!0),t.item.LASTPRICE>0?(e.openBlock(),e.createElementBlock("div",R,[O,e.createElementVNode("span",G,e.toDisplayString(t.item.LASTPRICE)+e.toDisplayString(t.item.CURRENCY_SIGN)+",\xA0",1),e.createElementVNode("span",{class:e.normalizeClass(t.meUtils.checkIncreaseClass(t.item.MONTH_INCREASE))},e.toDisplayString(t.meUtils.checkExist(t.item.MONTH_INCREASE))+"%",3),P])):e.createCommentVNode("",!0)])}const K=k(U,[["render",H],["__scopeId","data-v-96bbfbb2"]]),j=e.defineComponent({name:"LinkBond",props:{item:{type:Object,default:()=>{}}},setup(t){const s=_();return{meUtils:E,getLink:()=>`/${String(s.params.locale).toLowerCase()}/bond/${String(s.params.region).toUpperCase()}/${t.item.NAME}/${t.item.SECID}/info`}}}),z={class:"linkList"},q={class:"linkList__wrap"},Q=e.createTextVNode(" ("),X={class:"linkList__itemLastPrice"},Y=e.createTextVNode(") ");function W(t,s,n,u,a,m){const i=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",z,[t.meUtils.isExistItem(t.item)?(e.openBlock(),e.createBlock(i,{key:0,to:t.getLink(),class:"linkList__link"},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(t.item.NAME),1)]),_:1},8,["to"])):e.createCommentVNode("",!0),e.createElementVNode("div",q,[Q,e.createElementVNode("span",{class:e.normalizeClass(t.meUtils.checkIncreaseClass(t.item["\u0414\u043E\u0445\u043E\u0434\u043D\u043E\u0441\u0442\u044C \u0433\u043E\u0434\u043E\u0432\u0430\u044F"]))},e.toDisplayString(t.meUtils.checkExist(t.item["\u0414\u043E\u0445\u043E\u0434\u043D\u043E\u0441\u0442\u044C \u0433\u043E\u0434\u043E\u0432\u0430\u044F"]))+"%,\xA0",3),e.createElementVNode("span",X,e.toDisplayString(t.meUtils.convertDate(t.item.MATDATE)),1),Y])])}const J=k(j,[["render",W]]),Z=e.defineComponent({name:"LinkETF",props:{item:{type:Object,default:()=>{}}},setup(t){const s=_();return{meUtils:E,getLink:()=>`/${String(s.params.locale).toLowerCase()}/etf/${String(s.params.region).toUpperCase()}/${t.item.NAME}/${t.item.SECID}/info`}}}),x={class:"linkList"},ee={class:"linkList__wrap"},te=e.createTextVNode(" ("),se={class:"linkList__itemLastPrice"},oe=e.createTextVNode(") ");function ne(t,s,n,u,a,m){const i=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",x,[t.meUtils.isExistItem(t.item)?(e.openBlock(),e.createBlock(i,{key:0,to:t.getLink(),class:"linkList__link"},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(t.item.NAME),1)]),_:1},8,["to"])):e.createCommentVNode("",!0),e.createElementVNode("div",ee,[te,e.createElementVNode("span",se,e.toDisplayString(t.item.LASTPRICE)+e.toDisplayString(t.item.CURRENCY_SIGN)+",\xA0",1),e.createElementVNode("span",{class:e.normalizeClass(t.meUtils.checkIncreaseClass(t.item.MONTH_INCREASE))},e.toDisplayString(t.meUtils.toFixed(t.item.MONTH_INCREASE))+"%,\xA0",3),e.createElementVNode("span",{class:e.normalizeClass(t.meUtils.checkIncreaseClass(t.item.QUOTATIONS_MONTH))},e.toDisplayString(t.meUtils.toFixed(t.item.QUOTATIONS_MONTH))+"%",3),oe])])}const re=k(Z,[["render",ne]]),ae=e.defineComponent({name:"LinkIndex",props:{item:{type:Object,default:()=>{}}},setup(){return{meUtils:E}}}),ie={class:"linkList"};function ue(t,s,n,u,a,m){const i=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",ie,[t.meUtils.isExistItem(t.item)?(e.openBlock(),e.createBlock(i,{key:0,class:"linkList__link",to:{name:"Index",params:{name:t.item.NAME,ticker:t.item.TICKER}}},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(t.item.NAME),1)]),_:1},8,["to"])):e.createCommentVNode("",!0)])}const le=k(ae,[["render",ue]]),ce=e.defineComponent({name:"StocksContainer",components:{LinkIndex:le,Loader:y,LinkETF:re,LinkBond:J,LinkStock:K},setup(){const t=f(),s=e.ref(null),n=e.ref([]),u=e.ref(new Map),a=_(),m=o=>{const{length:r}=o;return r>6?`grid-template-columns: repeat(2, 45%); grid-template-rows: repeat(${Math.round(r/2)}, 1fr)`:`grid-template-columns: repeat(1, 100%); grid-template-rows: repeat(${r}, 1fr)`},i=()=>{let o="",r=[];n.value.forEach(c=>{const l=String(c.NAME.charAt(0));o!==l?(o!==""&&u.value.set(o,[...r]),r=[],o=l,r.push(c)):o!==""&&r.push(c)})},d=()=>C(this,null,function*(){if(a.params.type==="stocks"){const o=yield t.getActivesList(String(a.params.region).toUpperCase(),"shares",3e3,1);s.value=o.data,n.value=[...s.value.ITEMS],i()}else if(a.params.type==="bonds"){const o=yield t.getActivesList("RUS","obligations",1e6,1);s.value=o.data,n.value=[...s.value.ITEMS],i()}else if(a.params.type==="etf"){const o=yield t.getActivesList("RUS","shares_etf",1e6,1);s.value=o.data,n.value=[...s.value.ITEMS],i()}else if(a.params.type==="indexes"){const o=yield t.getActivesList("RUS","indexes",1e6,1);s.value=o.data;const r=s.value.ITEMS[0];Object.keys(r).forEach(c=>{n.value.push({TICKER:r[c].TICKER,NAME:r[c].NAME,ID:r[c].ID,EXCLUDE_FILTER:r[c].EXCLUDE_FILTER})}),i()}});return A(()=>C(this,null,function*(){yield d()})),e.watch(()=>a.params,()=>{u.value=new Map,n.value=[],s.value="",d()}),{itemsMap:u,route:a,getGridRowsCount:m}}});const pe={key:4};function me(t,s,n,u,a,m){const i=e.resolveComponent("LinkStock"),d=e.resolveComponent("LinkBond"),o=e.resolveComponent("LinkETF"),r=e.resolveComponent("LinkIndex"),c=e.resolveComponent("Loader");return t.itemsMap.size!==0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(t.itemsMap,(l,S)=>(e.openBlock(),e.createElementBlock("div",{key:S,class:"stock"},[e.createElementVNode("h3",null,e.toDisplayString(l[0]),1),e.createElementVNode("div",{class:"stocksGrid",style:e.normalizeStyle(t.getGridRowsCount(l[1]))},[t.route.params.type==="stocks"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(l[1],p=>(e.openBlock(),e.createBlock(i,{key:p.ID,class:"linkList",item:p},null,8,["item"]))),128)):t.route.params.type==="bonds"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(l[1],p=>(e.openBlock(),e.createBlock(d,{key:p.ID,class:"linkList",item:p},null,8,["item"]))),128)):t.route.params.type==="etf"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(l[1],p=>(e.openBlock(),e.createBlock(o,{key:p.ID,class:"linkList",item:p},null,8,["item"]))),128)):t.route.params.type==="indexes"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:3},e.renderList(l[1],p=>(e.openBlock(),e.createBlock(r,{key:p.ID,class:"linkList",item:p},null,8,["item"]))),128)):(e.openBlock(),e.createElementBlock("h1",pe,"\u041E\u0448\u0438\u0431\u043A\u0430. \u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0439 \u0442\u0438\u043F \u0446\u0435\u043D\u043D\u043E\u0439 \u0431\u0443\u043C\u0430\u0433\u0438."))],4)]))),128)):(e.openBlock(),e.createBlock(c,{key:1,class:"stock__loader"}))}const de=k(ce,[["render",me],["__scopeId","data-v-39bf1e75"]]),{STOCKS_FILTER_CHANGE_PICKED:ke,STOCKS_FILTER_CURRENT:_e}=L,Ee=B({name:"SecurityList",components:{UtilsColumn:I,StocksContainer:de,Alert:w,Swiper:$,SwiperSlide:N},setup(){const t=g(),s=_(),n=h(()=>t.getters["stocksFiltersStore/allStocks"]);return h(()=>t.getters["stocksFiltersStore/currentFilter"]),{route:s,getAllStocks:n,changeFilter:a=>{storeApp.commit(`stocksFiltersStore/${ke}`),storeApp.commit(`stocksFiltersStore/${_e}`,a)}}}});const Ce={class:"allStocks"},Se={class:"flexWrapperColumn"},he={class:"stocksHeader defaultBlack27px"},ye={key:0,class:"allStocks__title"},fe={key:1,class:"allStocks__title"},Be={key:2,class:"allStocks__title"},ge={key:3,class:"allStocks__title"},Le={key:4,class:"allStocks__title"},$e={class:"stocksMain"},Ne={class:"stocks"},ve={class:"rightInfo"};function Ae(t,s,n,u,a,m){const i=e.resolveComponent("SwiperSlide"),d=e.resolveComponent("Swiper"),o=e.resolveComponent("Alert"),r=e.resolveComponent("StocksContainer"),c=e.resolveComponent("UtilsColumn");return e.openBlock(),e.createElementBlock("div",Ce,[e.createElementVNode("div",Se,[e.createElementVNode("div",he,[t.route.params.type==="stocks"&&t.route.params.region==="rus"?(e.openBlock(),e.createElementBlock("h1",ye,e.toDisplayString(t.t("assetsList.stockRu")),1)):e.createCommentVNode("",!0),t.route.params.type==="stocks"&&t.route.params.region==="usa"?(e.openBlock(),e.createElementBlock("h1",fe,e.toDisplayString(t.t("assetsList.stockEn")),1)):t.route.params.type==="bonds"?(e.openBlock(),e.createElementBlock("h1",Be,e.toDisplayString(t.t("assetsList.bond")),1)):t.route.params.type==="etf"?(e.openBlock(),e.createElementBlock("h1",ge,e.toDisplayString(t.t("assetsList.etf")),1)):t.route.params.type==="indexes"?(e.openBlock(),e.createElementBlock("h1",Le,e.toDisplayString(t.t("assetsList.indexes")),1)):e.createCommentVNode("",!0)]),e.createVNode(d,{class:"stocksFilter","free-mode":!0,"slides-per-view":"auto","space-between":10},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.getAllStocks,l=>(e.openBlock(),e.createBlock(i,{key:l.name,onClick:S=>t.changeFilter(l)},{default:e.withCtx(()=>[e.createElementVNode("span",{class:e.normalizeClass({isPicked:l.isPicked})},e.toDisplayString(l.name),3)]),_:2},1032,["onClick"]))),128))]),_:1}),e.createElementVNode("div",$e,[e.createElementVNode("div",Ne,[t.route.params.type==="bonds"||t.route.params.type==="etf"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[t.route.params.type==="bonds"?(e.openBlock(),e.createBlock(o,{key:0,label:"\u0412 \u0441\u043A\u043E\u0431\u043A\u0430\u0445 \u0443\u043A\u0430\u0437\u0430\u043D\u044B \u0434\u043E\u0445\u043E\u0434\u043D\u043E\u0441\u0442\u044C \u0438 \u0434\u0430\u0442\u0430 \u043F\u043E\u0433\u0430\u0448\u0435\u043D\u0438\u044F \u043E\u0431\u043B\u0438\u0433\u0430\u0446\u0438\u0439"})):e.createCommentVNode("",!0),t.route.params.type==="etf"?(e.openBlock(),e.createBlock(o,{key:1,label:"\u0412 \u0441\u043A\u043E\u0431\u043A\u0430\u0445 \u0443\u043A\u0430\u0437\u0430\u043D\u044B \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u044F\u044F \u0446\u0435\u043D\u0430 \u0437\u0430\u043A\u0440\u044B\u0442\u0438\u044F, \u043F\u0440\u0438\u0440\u043E\u0441\u0442 \u0437\u0430 \u043C\u0435\u0441\u044F\u0446 \u0438 \u043A\u043E\u043C\u0438\u0441\u0441\u0438\u044F"})):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createBlock(o,{key:1,label:"\u0412 \u0441\u043A\u043E\u0431\u043A\u0430\u0445 \u0443\u043A\u0430\u0437\u0430\u043D\u044B \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u044F\u044F \u0446\u0435\u043D\u0430 \u0437\u0430\u043A\u0440\u044B\u0442\u0438\u044F \u0438 \u043F\u0440\u0438\u0440\u043E\u0441\u0442 \u0437\u0430 \u043C\u0435\u0441\u044F\u0446"})),e.createVNode(r)]),e.createElementVNode("div",ve,[e.createVNode(c)])])])])}const be=k(Ee,[["render",Ae],["__scopeId","data-v-3a29d86b"]]);export{be as default};
//# sourceMappingURL=index.025daa0b.js.map
