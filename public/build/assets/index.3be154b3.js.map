{"version":3,"file":"index.3be154b3.js","sources":["../../../resources/js/views/Document/modules/Views/modules/Pages/Dividends/index.vue"],"sourcesContent":["<template>\n  <div class=\"greyBg\">\n    <div class=\"flexWrapperColumn\">\n      <div class=\"methodology defaultBlack27px defaultGrey20px\" v-if=\"!isNotFound\">\n        <h1>{{ $t('dividends.methodLabel') }}</h1>\n        <p>{{ getCalcMethods }}</p>\n      </div>\n      <div v-if=\"isInit\" class=\"table\">\n        <template v-if=\"!isNotFound\">\n          <div class=\"tableHeader flexRowBetween\">\n            <p v-for=\"index in getTranslationTableHeaderLength()\" :key=\"index\">\n              {{ $t(`dividends.tableHeaders.${index - 1}`)}} <span v-if=\"index === 3\"> / <span class=\"success-color\">текущая цена</span></span>\n            </p>\n          </div>\n          <div\n            v-for=\"dividend of dividends\"\n            :key=\"dividend.currentPrice\"\n            class=\"tableRows tableValue flexRowBetween\"\n            :class=\"{\n              ['success-color']: (new Date(...dividend['Дата закрытия реестра'].split('.').reverse()) > new Date()) ? true : false,\n              current: dividend.currentPrice,\n              default: !dividend.currentPrice,\n            }\"\n          >\n            <p>{{ dividend['Дата закрытия реестра'] }}</p>\n            <p>{{ dividend['Дата закрытия реестра (T-2)'] }}</p>\n            <p>{{ dividend['Цена на дату закрытия'].toLocaleString() }}</p>\n            <p>{{ dividend['Дивиденды'] }}</p>\n            <p>{{ dividend['Дивиденды, в %'] }}</p>\n          </div>\n        </template>\n        <template v-else>\n          <h1>Компания {{ getNameCompany }} не выплачивает дивиденды за текущий год</h1>\n        </template>\n      </div>\n      <Loader v-else />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n defineComponent, onMounted, onServerPrefetch, onUnmounted, ref, reactive\n} from 'vue';\nimport { useStore } from 'vuex';\nimport i18n from '@/plugins/i18n/vue-i18n';\nimport { DynamicObject } from '@/interfaces';\nimport Loader from '@/components/Loader/index.vue';\nimport { useApiFinplan } from '@/use/api/useApiFinplan';\n\nexport default defineComponent({\n  name: 'DocumentDividendsPage',\n  components: { Loader },\n  setup() {\n    const api = useApiFinplan();\n    const store = useStore();\n    const dividends = ref<DynamicObject | null>(null);\n    const isNotFound = ref<boolean>(false);\n    const isInit = ref<boolean>(false);\n    const getTranslationTableHeaderLength = (): number =>\n      i18n.global.messages.ru.dividends.tableHeaders.length;\n\n    const init = async () => {\n      const response = await api.getDividends(\n        store.getters['documentStore/getRegion'],\n        store.getters['documentStore/getSecId'],\n      );\n      // @ts-ignore\n      dividends.value = response.data.DIVIDENDS;\n\n      if (!dividends.value || !dividends.value.length) {\n        isNotFound.value = true;\n      }\n      isInit.value = true;\n    };\n\n    const reset = () => {\n      dividends.value = null;\n      isInit.value = false;\n      isNotFound.value = false;\n    };\n\n    const getCalcMethods = computed(() => {\n     return store.getters['documentStore/getCalcMethod']\n    });\n\n    const getNameCompany = computed(() => store.getters['documentStore/getName'])\n\n    onServerPrefetch(async () => {\n      await init();\n    });\n\n    onMounted(async () => {\n      if (!isInit.value) {\n        await init();\n      }\n    });\n\n    onUnmounted(() => {\n      reset();\n    });\n\n    return {\n      isInit,\n      isNotFound,\n      dividends,\n      getCalcMethods,\n      getNameCompany,\n      getTranslationTableHeaderLength\n    };\n  },\n});\n</script>\n\n<style scoped lang=\"scss\">\n.flexWrapperColumn {\n  margin: auto;\n}\n\n.methodology {\n  > h1 {\n    margin-top: 20px;\n  }\n  > p {\n    width: 70%;\n    margin-top: 40px;\n  }\n}\n\n.table {\n  margin-top: 60px;\n  .tableHeader {\n    //padding: 25px 20px;\n    padding: 10px;\n    background-color: white;\n\n    > p {\n      width: 18%;\n      margin: 0;\n      line-height: 100%;\n    }\n  }\n\n  .current {\n    background-color: white;\n  }\n\n  .current:hover {\n    background-color: #fec006;\n  }\n\n  .current:hover .currentPrice {\n    opacity: 1;\n  }\n\n  .default {\n    background-color: #f4f4f4;\n  }\n\n  .default:hover {\n    background-color: white;\n  }\n\n  .tableRows {\n    width: 100%;\n    margin-top: 3px;\n    //padding: 15px 20px;\n    padding: 10px;\n    cursor: pointer;\n\n    > p {\n      width: 18%;\n\n      padding: 0;\n      margin: 0;\n    }\n\n    .currentPrice {\n      position: absolute;\n      width: max-content;\n      margin-top: 80px;\n      padding: 10px 20px;\n      color: white;\n      font-size: 14px;\n      background-color: black;\n      border-radius: 20px;\n      opacity: 0;\n      transition: 0.3s;\n    }\n  }\n}\n\n@media (max-width: 600px) {\n  .flexWrapperColumn {\n    padding: 0 20px;\n    .methodology {\n      > p {\n        width: 100%;\n      }\n    }\n    .table {\n      overflow-x: scroll;\n      .tableHeader {\n        width: 700px;\n      }\n\n      .tableRows {\n        width: 700px;\n      }\n    }\n  }\n}\n\n.success-color {\n  color: #00aa4f\n}\n\n.success-color > p {\n  color: #00aa4f\n}\n</style>\n"],"names":["_sfc_main","defineComponent","Loader","api","useApiFinplan","store","useStore","dividends","ref","isNotFound","isInit","getTranslationTableHeaderLength","i18n","init","__async","response","reset","getCalcMethods","computed","getNameCompany","onServerPrefetch","onMounted","onUnmounted","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_9","_hoisted_7","_component_Loader","_resolveComponent","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_ctx","_createCommentVNode","_toDisplayString","_hoisted_10","_Fragment","index","_createTextVNode","_hoisted_6","_renderList","dividend","_normalizeClass","_createBlock"],"mappings":"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"}