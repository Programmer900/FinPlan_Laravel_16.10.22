{"version":3,"file":"index.6ff9ba9f.js","sources":["../../../resources/js/views/Document/modules/Views/modules/Pages/CompanyIndicators/index.vue"],"sourcesContent":["<template>\n  <div class=\"indicatorsPage\">\n    <div class=\"greyBg\">\n      <div class=\"flexWrapperColumn\">\n        <button class=\"resetBtn\"  @click=\"onCLickResetBtn()\">Сбросить график</button>\n        <div class=\"checkboxes flexRowCenter\">\n          <DocumentIndicatorsChartCheckboxes\n            v-for=\"item in getChartDataKeys\"\n            :key=\"item\"\n            :id=\"item\"\n            :item=\"getIndicators[item]\"\n            @onClick=\"onChangeChartDataView\"\n          />\n        </div>\n\n        <ChartDynamic v-if=\"isInit\" :data=\"getChartDataValues\" :categories=\"getChartCategories\" />\n        <h1 v-else>Информация о показателях компании не найдена</h1>\n      </div>\n    </div>\n\n    <DocumentIndicatorsTable\n      :isInit=\"isInit\"\n      :data=\"getIndicators\"\n      :categories=\"getChartCategories\"\n      @onChangeParam=\"onChangeParam\"\n      @onChangeChartDataView=\"onChangeChartDataView\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed, defineComponent, onMounted, onUnmounted, ref, watch,\n} from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useStore } from 'vuex';\nimport ChartDynamic from '@/components/Charts/Dynamic/index.vue';\nimport DocumentIndicatorsTable from '@/views/Document/modules/Views/modules/IndicatorsTable/index.vue';\nimport DocumentIndicatorsChartCheckboxes from '@/views/Document/modules/Views/modules/Pages/CompanyIndicators/modules/ChartCheckboxes/index.vue';\n\nexport default defineComponent({\n  name: 'DocumentCompanyIndicatorsPage',\n  components: { DocumentIndicatorsChartCheckboxes, DocumentIndicatorsTable, ChartDynamic },\n  setup() {\n    const route = useRoute();\n    const store = useStore();\n    const isInit = ref<boolean>(false);\n    const hasBeenChanged = ref<boolean>(false);\n\n    const init = async () => {\n      isInit.value = await store.dispatch('documentStore/initIndicatorsChart');\n    };\n\n    const reset = () => {\n      isInit.value = false;\n      hasBeenChanged.value = false;\n      store.commit('documentStore/resetIndicatorsChart');\n      store.commit('documentStore/resetTableProp');\n    };\n\n    const onCLickResetBtn = async () => {\n      isInit.value = false;\n      isInit.value = await store.dispatch('documentStore/resetIndicatorsChartToDefault');\n      hasBeenChanged.value = false;\n    };\n\n    const onChangeChartDataView = (key: string): void => {\n      hasBeenChanged.value = true;\n      store.getters['documentStore/getIndicatorsChart'][key].visible = !store.getters['documentStore/getIndicatorsChart'][key].visible;\n    };\n\n    const onChangeParam = async (paramName: string) => {\n      hasBeenChanged.value = false;\n      store.commit('documentStore/resetIndicatorsChart');\n      await init();\n    };\n\n    const getChartDataValues = computed(() =>\n      Object.values(store.getters['documentStore/getIndicatorsChart']));\n\n    const getChartCategories = computed(\n      () => store.getters['documentStore/getIndicatorsChartCategoriesCustom'].reverse(),\n    );\n\n    const getChartDataKeys = computed(() =>\n      Object.keys(store.getters['documentStore/getIndicatorsChart']));\n\n    const getIndicators = computed(() => store.getters['documentStore/getIndicatorsChart']);\n\n    const getQuarters = computed(() => store.getters['documentStore/getIndicatorsQuarter']);\n\n    onMounted(async () => {\n      await init();\n    });\n\n    onUnmounted( () => {\n      reset();\n    });\n\n    watch(\n      () => route.params.name,\n      () => {\n        reset();\n      },\n    );\n\n    return {\n      isInit,\n      onChangeChartDataView,\n      onChangeParam,\n      onCLickResetBtn,\n      getChartDataKeys,\n      getIndicators,\n      getChartCategories,\n      getChartDataValues,\n      getQuarters,\n      hasBeenChanged,\n    };\n  },\n});\n</script>\n\n<style scoped lang=\"scss\">\n.indicatorsPage {\n  .flexWrapperColumn {\n    margin: auto;\n  }\n\n  .resetBtn {\n    width: max-content;\n    margin-bottom: 10px;\n    padding: 8px 10px;\n    color: #fff;\n    background: #2a8634;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n\n    &:hover {\n      background: #0f4319;\n    }\n  }\n\n  .graph {\n    width: 100%;\n    height: 800px;\n    background-color: lightblue;\n  }\n\n  .checkboxes {\n    display: flex;\n    flex-wrap: wrap;\n    width: 70%;\n    margin-bottom: 20px;\n\n    .checkbox {\n      width: max-content;\n      cursor: pointer;\n\n      > p {\n        margin-left: 20px;\n        font-size: 18px;\n        line-height: 150%;\n      }\n\n      &:not(:last-child) {\n        margin-right: 35px;\n      }\n\n      .checkboxRound {\n        justify-content: center;\n        width: 50px;\n        min-width: 50px;\n        height: 50px;\n        border-radius: 50%;\n        cursor: pointer;\n\n        .clicked {\n          width: 20px;\n          height: 20px;\n          background-color: white;\n          border-radius: 50%;\n        }\n      }\n    }\n  }\n\n  @media (max-width: 1600px) {\n    .checkboxes {\n      width: 80%;\n    }\n  }\n\n  @media (max-width: 1400px) {\n    .checkboxes {\n      .checkbox {\n        > p {\n          font-size: 16px;\n        }\n\n        .checkboxRound {\n          width: 17px;\n          min-width: 17px;\n          height: 17px;\n\n          .clicked {\n            width: 7px;\n            height: 7px;\n          }\n        }\n      }\n    }\n  }\n\n  @media (max-width: 1200px) {\n    .checkboxes {\n      width: 90%;\n    }\n  }\n\n  @media (max-width: 1100px) {\n    .checkboxes {\n      width: 100%;\n    }\n  }\n\n  @media (max-width: 900px) {\n    .graph {\n      height: 300px;\n    }\n\n    .checkboxes {\n      flex-direction: column;\n      align-items: flex-start;\n      margin-top: -20px;\n      margin-left: 0;\n\n      .checkbox {\n        display: flex;\n        width: 100%;\n        margin-top: 10px;\n\n        > p {\n          width: 100%;\n        }\n\n        .checkboxRound {\n          margin-left: 0;\n        }\n      }\n    }\n  }\n\n  @media (max-width: 600px) {\n    .flexWrapperColumn {\n      padding: 20px;\n\n      .graph {\n        height: 300px;\n      }\n\n      .checkboxes {\n        flex-direction: column;\n        align-items: flex-start;\n        margin-top: -20px;\n        margin-left: 0;\n\n        .checkbox {\n          display: flex;\n          width: 100%;\n          margin-top: 10px;\n\n          > p {\n            width: 100%;\n          }\n\n          .checkboxRound {\n            margin-left: 0;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n"],"names":["_sfc_main","defineComponent","DocumentIndicatorsChartCheckboxes","DocumentIndicatorsTable","ChartDynamic","route","useRoute","store","useStore","isInit","ref","hasBeenChanged","init","__async","reset","onCLickResetBtn","onChangeChartDataView","key","onChangeParam","paramName","getChartDataValues","computed","getChartCategories","getChartDataKeys","getIndicators","getQuarters","onMounted","onUnmounted","watch","_component_DocumentIndicatorsTable","_resolveComponent","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_cache","$event","_ctx","_hoisted_4","_Fragment","_renderList","item","_createBlock","_component_DocumentIndicatorsChartCheckboxes","_component_ChartDynamic","_hoisted_5"],"mappings":"2kBAwCA,MAAAA,EAAeC,kBAAgB,CAC7B,KAAM,gCACN,WAAY,CAAE,kCAAAC,EAAmC,wBAAAC,EAAyB,aAAAC,CAAa,EACvF,OAAQ,CACN,MAAMC,EAAQC,IACRC,EAAQC,IACRC,EAASC,MAAa,EAAK,EAC3BC,EAAiBD,MAAa,EAAK,EAEnCE,EAAO,IAAYC,EAAA,sBACvBJ,EAAO,MAAQ,MAAMF,EAAM,SAAS,mCAAmC,CAAA,GAGnEO,EAAQ,IAAM,CAClBL,EAAO,MAAQ,GACfE,EAAe,MAAQ,GACvBJ,EAAM,OAAO,oCAAoC,EACjDA,EAAM,OAAO,8BAA8B,CAAA,EAGvCQ,EAAkB,IAAYF,EAAA,sBAClCJ,EAAO,MAAQ,GACfA,EAAO,MAAQ,MAAMF,EAAM,SAAS,6CAA6C,EACjFI,EAAe,MAAQ,EAAA,GAGnBK,EAAyBC,GAAsB,CACnDN,EAAe,MAAQ,GACjBJ,EAAA,QAAQ,oCAAoCU,GAAK,QAAU,CAACV,EAAM,QAAQ,oCAAoCU,GAAK,OAAA,EAGrHC,EAAuBC,GAAsBN,EAAA,sBACjDF,EAAe,MAAQ,GACvBJ,EAAM,OAAO,oCAAoC,EACjD,MAAMK,EAAK,CAAA,GAGPQ,EAAqBC,WAAS,IAClC,OAAO,OAAOd,EAAM,QAAQ,mCAAmC,CAAC,EAE5De,EAAqBD,EAAA,SACzB,IAAMd,EAAM,QAAQ,oDAAoD,QAAQ,CAAA,EAG5EgB,EAAmBF,WAAS,IAChC,OAAO,KAAKd,EAAM,QAAQ,mCAAmC,CAAC,EAE1DiB,EAAgBH,EAAAA,SAAS,IAAMd,EAAM,QAAQ,mCAAmC,EAEhFkB,EAAcJ,EAAAA,SAAS,IAAMd,EAAM,QAAQ,qCAAqC,EAEtFmB,OAAAA,EAAAA,UAAU,IAAYb,EAAA,sBACpB,MAAMD,EAAK,CAAA,EACZ,EAEDe,EAAAA,YAAa,IAAM,CACXb,GAAA,CACP,EAEDc,EAAA,MACE,IAAMvB,EAAM,OAAO,KACnB,IAAM,CACES,GACR,CAAA,EAGK,CACL,OAAAL,EACA,sBAAAO,EACA,cAAAE,EACA,gBAAAH,EACA,iBAAAQ,EACA,cAAAC,EACA,mBAAAF,EACA,mBAAAF,EACA,YAAAK,EACA,eAAAd,CAAA,CAEJ,CACF,CAAC,WApHU,MAAM,qBAEJ,MAAM,oNAsBXkB,EAAAC,mBAAA,yBAAA,SAxBFC,YAcM,EAAAC,qBAAA,MAAAC,EAAA,CAAAC,EAAA,mBAbJ,MAA6EC,EAAA,CAAAD,EAAA,mBAA/D,MAAUE,EAAA,CAAQF,EAAAA,mBAAA,SAAA,CAAqB,MAAA,WACrD,QAAAG,EAAA,KAQMA,EARN,GAQMC,GAAAC,EAAA,kBAAA,EAAA,uFAAA,6BAPJC,EAME,EAAAT,YAJM,EAAI,EAAAC,EAAAA,mBAAAS,EAAA,SAAA,KAAAC,EAAAA,WAAAH,EAAA,iBAAAI,IACLZ,EAAI,UAAA,EAAAa,EAAA,YAAAC,EAAA,CACR,IAAIF,EACJ,GAAAA,EAAA,KAAAJ,EAAA,cAAAI,wEAIe,EAAA,GAAA,EAAA,CAAA,0BAAiCC,EAAAA,YAAAE,EAAA,CAAG,IAAA,EAAA,KAAAP,EAAA,mBACxD,WAAAA,EAAA,kBAAA,EAAA,KAAA,EAAA,CAAA,OAAA,YAAA,CAAA,IAAAR,EAAA,UAAA,EAAAC,EAAAA,mBAAA,KAAAe,EAAA,iPAAA,EAIJ,CAAA,CAAA,CAAA,gBAESlB,EAAa,CACnB,OAAYU,EAAA,OACZ,KAAAA,EAAA,cACA,WAAAA,EAAA,mBAAA,gBAAAA,EAAA"}