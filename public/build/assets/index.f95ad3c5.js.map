{"version":3,"file":"index.f95ad3c5.js","sources":["../../../resources/js/views/Document/modules/Views/modules/Pages/Report/index.vue"],"sourcesContent":["<template>\n  <div>\n    <div>\n      <div class=\"flexWrapperRow tableValue navigation-wrapper\">\n        <p\n          v-for=\"button in reportSwitches\"\n          @click=\"handleClick(button)\"\n          :key=\"button.name\"\n          class=\"navigation-element\"\n          :class=\"{ isClicked: button.clicked }\"\n          v-if=\"isUsa\"\n        >\n         <router-link exact :to=\"fullPath + '/' + button.link\" class=\"reportLink\">{{ button.name }}</router-link>\n        </p>\n        <h3 v-else class=\"default-w-700\" data-v-6e658b22=\"\">Нет данных</h3>\n      </div>\n    </div>\n    <template v-if=\"isUsa\">\n      <router-view />\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed, defineComponent, onMounted, onUnmounted, ref, watch,\n} from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useStore } from 'vuex';\nimport DocumentIndicatorsTable from '@/views/Document/modules/Views/modules/IndicatorsTable/index.vue';\n\nexport default defineComponent({\n  name: 'DocumentReportPage',\n  components: {\n    DocumentIndicatorsTable,\n  },\n  setup() {\n    const routerBase = useRouter();\n    const route = useRoute();\n    const store = useStore();\n    const isInit = ref<boolean>(false);\n    const fullPath = ref<string>('')\n\n    const reportSwitches = ref<any[]>([\n      { name: 'Баланс', clicked: true, link: 'balance' },\n      { name: 'Прибыль и убытки', clicked: false, link: 'profit-loss' },\n      { name: 'Движение денежных средств', clicked: false, link: 'cash-flow' },\n      //{ name: 'Фин оценка', clicked: false, link: 'fin-assessment' },\n    ]);\n\n    const handleClick = (button) => {\n      reportSwitches.value.forEach((prop) => {\n        prop.clicked = false;\n      });\n      button.clicked = !button.clicked;\n    };\n\n    const init = async () => {\n      isInit.value = await store.dispatch('documentStore/initIndicatorsChart');\n    };\n\n    const reset = () => {\n      isInit.value = false;\n      store.commit('documentStore/resetIndicatorsChart');\n      store.commit('documentStore/resetTableProp');\n    };\n\n    const onChangeChartDataView = (key: string): void => {\n      store.getters['documentStore/getIndicatorsChart'][key].visible = !store.getters['documentStore/getIndicatorsChart'][key].visible;\n    };\n\n    const onChangeParam = async (paramName: string) => {\n      store.commit('documentStore/resetIndicatorsChart');\n      await init();\n    };\n\n    const getChartDataValues = computed(() =>\n      Object.values(store.getters['documentStore/getIndicatorsChart']));\n\n    const getChartCategories = computed(\n      () => store.getters['documentStore/getIndicatorsChartCategories'],\n    );\n\n    const getChartDataKeys = computed(() =>\n      Object.keys(store.getters['documentStore/getIndicatorsChart']));\n\n    const getIndicators = computed(() => store.getters['documentStore/getIndicatorsChart']);\n\n    const getQuarters = computed(() => store.getters['documentStore/getIndicatorsQuarter']);\n\n    const isUsa = computed(() => {\n      if(route.params.region === 'USA') {\n        return true\n      }\n      return false\n    });\n\n    onMounted(async () => {\n      //console.log(route)\n      //console.log(routerBase)\n      fullPath.value = route.fullPath\n      routerBase.push({ name: 'DocumentReportBalance'})\n\n      await init();\n    });\n\n    onUnmounted(() => {\n      reset();\n    });\n\n    watch(\n      () => route.params.name,\n      () => {\n        reset();\n      },\n    );\n\n    return {\n      reportSwitches,\n      handleClick,\n      isInit,\n      onChangeChartDataView,\n      onChangeParam,\n      getChartDataKeys,\n      getIndicators,\n      getChartCategories,\n      getChartDataValues,\n      getQuarters,\n\n      fullPath,\n\n      isUsa\n    };\n  },\n});\n</script>\n\n<style scoped lang=\"scss\">\n.flexWrapperRow {\n  width: 80%;\n  margin: auto;\n\n  > p {\n    width: max-content;\n    margin-right: 30px;\n    //padding: 15px 45px;\n    color: #797979;\n    font-weight: 500;\n    white-space: nowrap;\n    background-color: white;\n    border-radius: 30px;\n    cursor: pointer;\n  }\n\n  :hover {\n    color: white;\n    //background-color: #fec006;\n  }\n\n  .isClicked {\n    color: white;\n    background-color: #2a8634;\n    border-radius: 30px;\n  }\n}\n\n@media (max-width: 1800px) {\n  .flexWrapperRow {\n    width: 90%;\n  }\n}\n\n@media (max-width: 1600px) {\n  .flexWrapperRow {\n    width: 100%;\n  }\n}\n\n@media (max-width: 1100px) {\n  .flexWrapperRow {\n    width: 100%;\n\n    > p {\n      padding: 12px 25px;\n    }\n  }\n}\n\n@media (max-width: 1000px) {\n  .flexWrapperRow {\n    width: 100%;\n    overflow: scroll;\n\n    > p {\n      margin-right: 10px;\n      padding: 12px 25px;\n    }\n  }\n}\n\n@media (max-width: 600px) {\n  .greyBg {\n    overflow-x: scroll;\n    .flexWrapperRow {\n      width: 100%;\n      padding: 20px;\n      overflow: scroll;\n    }\n    .tableValue {\n      width: 1000px;\n    }\n  }\n}\n.reportLink {\n  text-decoration: none;\n  outline: none;\n}\n\n.reportLink:hover, .reportLink:focus {\n  color: transparent;\n  background-color: transparent;\n  outline: none;\n}\n\np:hover .reportLink {\n}\n\np .reportLink {\n  color: #2a8634 !important;\n  padding: 15px 45px;\n  display: inherit;\n}\n\np.isClicked .reportLink {\n  color: #fff !important;\n}\n</style>\n"],"names":["_sfc_main","defineComponent","DocumentIndicatorsTable","routerBase","useRouter","route","useRoute","store","useStore","isInit","ref","fullPath","reportSwitches","handleClick","button","prop","init","__async","reset","onChangeChartDataView","key","onChangeParam","paramName","getChartDataValues","computed","getChartCategories","getChartDataKeys","getIndicators","getQuarters","isUsa","onMounted","onUnmounted","watch","_hoisted_3","_resolveComponent","_openBlock","_createElementBlock","_createElementVNode","_hoisted_1","_ctx","_Fragment","_renderList","$event","_normalizeClass","_component_router_link","_hoisted_2"],"mappings":"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"}